(()=>{"use strict";var e=function(e){var t=document.querySelector("#whoChoosesParagraph");3===e.pokemons.length?t.textContent="Wait for the game to start...":t.textContent=e.name+" chooses 1 pokemon"},t=function(){function e(e,t,n,r,a,o,c){this._name=e,this._image=t,this._maxHP=n,this._currentHP=n,this._attackPoints=r,this._defensePoints=a,this._types=o,this._moves=c}return Object.defineProperty(e.prototype,"name",{get:function(){return this._name},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"image",{get:function(){return this._image},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"currentHP",{get:function(){return this._currentHP},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"maxHP",{get:function(){return this._maxHP},enumerable:!1,configurable:!0}),e.prototype.subtractHP=function(e){var t=this._currentHP-e;t<0&&(this._currentHP=0),this._currentHP=t},e.prototype.heal=function(){this._currentHP=this._maxHP},Object.defineProperty(e.prototype,"attackPoints",{get:function(){return this._attackPoints},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"defensePoints",{get:function(){return this._defensePoints},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"types",{get:function(){return this._types},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"moves",{get:function(){return this._moves},enumerable:!1,configurable:!0}),e.prototype.isAlive=function(){return this._currentHP>0},e}(),n=function(){function e(e){this._pokemons=[];for(var n=0,r=e;n<r.length;n++){var a=r[n],o="../assets/"+a.name+".png",c=a.moves.reduce((function(e,t){return e.push({moveName:t.name,moveType:t.type}),e}),[]),u=a.types.map((function(e){return e})),p=new t(this._capitalize(a.name),o,a.stats.hp,a.stats.attack,a.stats.defense,u,c);this._pokemons.push(p)}}return Object.defineProperty(e.prototype,"pokemons",{get:function(){return this._pokemons},enumerable:!1,configurable:!0}),e.prototype.getPokemonByName=function(e){var t=this._pokemons.find((function(t){return t.name.toLowerCase()===e.toLowerCase()}));if(void 0===t)throw new Error("Pokemon "+e+" is not found in the pokemon factory");return t},e.prototype._capitalize=function(e){return e.charAt(0).toUpperCase()+e.slice(1)},e}();const r=JSON.parse('{"x":[{"name":"bulbasaur","types":["grass","poison"],"stats":{"hp":45,"attack":49,"defense":49},"moves":[{"name":"razor-wind","accuracy":100,"power":80,"type":"normal"},{"name":"vine-whip","accuracy":100,"power":45,"type":"grass"},{"name":"mega-drain","accuracy":100,"power":40,"type":"grass"},{"name":"razor-leaf","accuracy":95,"power":55,"type":"grass"}]},{"name":"charmander","types":["fire"],"stats":{"hp":39,"attack":52,"defense":43},"moves":[{"name":"mega-punch","accuracy":85,"power":80,"type":"normal"},{"name":"ember","accuracy":100,"power":40,"type":"fire"},{"name":"flamethrower","accuracy":100,"power":90,"type":"fire"},{"name":"submission","accuracy":80,"power":80,"type":"fighting"}]},{"name":"squirtle","types":["water"],"stats":{"hp":44,"attack":48,"defense":65},"moves":[{"name":"mega-kick","accuracy":75,"power":120,"type":"normal"},{"name":"water-gun","accuracy":100,"power":40,"type":"water"},{"name":"hydro-pump","accuracy":80,"power":110,"type":"water"},{"name":"blizzard","accuracy":70,"power":110,"type":"ice"}]},{"name":"weedle","types":["bug","poison"],"stats":{"hp":40,"attack":35,"defense":30},"moves":[{"name":"poison-sting","accuracy":100,"power":15,"type":"poison"},{"name":"string-shot","accuracy":95,"power":0,"type":"poison"},{"name":"bug-bite","accuracy":100,"power":60,"type":"bug"},{"name":"electroweb","accuracy":95,"power":55,"type":"electric"}]},{"name":"pidgey","types":["normal","flying"],"stats":{"hp":40,"attack":45,"defense":40},"moves":[{"name":"razor-wind","accuracy":100,"power":80,"type":"normal"},{"name":"wing-attack","accuracy":100,"power":60,"type":"flying"},{"name":"fly","accuracy":95,"power":90,"type":"flying"},{"name":"sky-attack","accuracy":90,"power":140,"type":"flying"}]},{"name":"rattata","types":["normal"],"stats":{"hp":30,"attack":56,"defense":35},"moves":[{"name":"body-slam","accuracy":100,"power":85,"type":"normal"},{"name":"bite","accuracy":100,"power":60,"type":"dark"},{"name":"bubble-beam","accuracy":100,"power":65,"type":"water"},{"name":"dig","accuracy":100,"power":80,"type":"ground"}]},{"name":"pikachu","types":["electric"],"stats":{"hp":35,"attack":55,"defense":40},"moves":[{"name":"slam","accuracy":75,"power":80,"type":"normal"},{"name":"thunder-punch","accuracy":100,"power":75,"type":"electric"},{"name":"thunderbolt","accuracy":100,"power":90,"type":"electric"},{"name":"thunder","accuracy":70,"power":110,"type":"electric"}]},{"name":"sandshrew","types":["ground"],"stats":{"hp":50,"attack":75,"defense":85},"moves":[{"name":"headbutt","accuracy":100,"power":70,"type":"normal"},{"name":"body-slam","accuracy":100,"power":85,"type":"normal"},{"name":"earthquake","accuracy":100,"power":100,"type":"ground"},{"name":"dig","accuracy":100,"power":80,"type":"ground"}]},{"name":"clefairy","types":["fairy"],"stats":{"hp":70,"attack":45,"defense":48},"moves":[{"name":"fire-punch","accuracy":100,"power":75,"type":"fire"},{"name":"ice-punch","accuracy":100,"power":75,"type":"ice"},{"name":"thunder-punch","accuracy":100,"power":75,"type":"electric"},{"name":"water-gun","accuracy":100,"power":40,"type":"water"}]},{"name":"abra","types":["psychic"],"stats":{"hp":25,"attack":20,"defense":15},"moves":[{"name":"mega-punch","accuracy":85,"power":80,"type":"normal"},{"name":"ice-punch","accuracy":100,"power":75,"type":"ice"},{"name":"thunder-punch","accuracy":100,"power":75,"type":"electric"},{"name":"psychic","accuracy":100,"power":90,"type":"psychic"}]},{"name":"machop","types":["fighting"],"stats":{"hp":70,"attack":80,"defense":50},"moves":[{"name":"karate-chop","accuracy":100,"power":50,"type":"fighting"},{"name":"mega-kick","accuracy":75,"power":120,"type":"normal"},{"name":"rolling-kick","accuracy":85,"power":60,"type":"fighting"},{"name":"submission","accuracy":80,"power":80,"type":"fighting"}]},{"name":"geodude","types":["rock","ground"],"stats":{"hp":40,"attack":80,"defense":100},"moves":[{"name":"headbutt","accuracy":100,"power":70,"type":"normal"},{"name":"rock-throw","accuracy":90,"power":50,"type":"rock"},{"name":"earthquake","accuracy":100,"power":100,"type":"ground"},{"name":"dig","accuracy":100,"power":80,"type":"ground"}]}]}');var a=function(t,a,o){var c=r.x,u=new n(c);Array.from(document.querySelectorAll("#pokemonList img")).forEach((function(n){return n.addEventListener("click",(function(n){3!==o.pokemons.length&&(function(e,t,n){var r=e.target.id,a=t.getPokemonByName(r);n.addPokemon(a),e.target.style.cursor="default",e.target.style.filter="grayscale(100%)"}(n,u,o),function(e,t){var n=t===e?Array.from(document.querySelectorAll("#choosePagePlayer1 img")):Array.from(document.querySelectorAll("#choosePagePlayer2 img")),r=t.pokemons[t.pokemons.length-1].name.toLowerCase();n[t.pokemons.length-1].setAttribute("src","./assets/"+r+".png")}(t,o),e(o=o===t?a:t),console.log(t,a),function(e,t){if(!(e.pokemons.length<3||t.pokemons.length<3)){var n=document.querySelector("#app");setTimeout((function(){return e=n,t=document.querySelector("#fight-page-template"),void(e.innerHTML=t.innerHTML);var e,t}),3e3)}}(t,a))}),{once:!0})}))},o=function(){function e(e,t){if(e.length>8)throw new Error("Too long name");if(t.length>3)throw new Error("Wrong number of pokemons");this._name=e,this._pokemons=t,this._indexOfActivePokemon=0}return Object.defineProperty(e.prototype,"name",{get:function(){return this._name},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"pokemons",{get:function(){return this._pokemons},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"indexOfActivePokemon",{set:function(e){this._indexOfActivePokemon=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"getActivePokemon",{get:function(){return this._pokemons[this._indexOfActivePokemon]},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"alivePokemons",{get:function(){return this.pokemons.filter((function(e){return e.isAlive()}))},enumerable:!1,configurable:!0}),e.prototype.addPokemon=function(e){this._pokemons.push(e)},e}(),c=function(e,t,n){e.value.length>0&&t.value.length>0?n.className="button-enabled":n.className="button-disabled"};setTimeout((function(){var t,n,r,u,p,i,s,m,y,l=document.querySelector("#app");t=l,n=document.querySelector("#starting-page-template"),t.innerHTML=n.innerHTML,function(e){var t=document.querySelector("#info-modal-template");e.innerHTML+=t.innerHTML}(l),r=document.querySelector("#enter-player1-name"),u=document.querySelector("#enter-player2-name"),p=document.querySelector("#start-game-button"),r.addEventListener("keyup",(function(){c(r,u,p)})),u.addEventListener("keyup",(function(){c(r,u,p)})),m=document.querySelector("#how-to-play-button"),y=document.querySelector("#info-modal-screen"),m.addEventListener("click",(function(){y.style.display="flex"})),null==(s=(i=y).querySelector(".exitButton"))||s.addEventListener("click",(function(){i.style.display="none"})),function(t){var n=document.querySelector("#start-game-button");null==n||n.addEventListener("click",(function(){var n,r,c,u=document.querySelector("#enter-player1-name").value,p=document.querySelector("#enter-player2-name").value,i=document.querySelector("#choose-page-template");t.innerHTML=i.innerHTML,n=new o(u,[]),r=new o(p,[]),c=n,function(e,t){document.querySelector("#choosePagePlayer1Name").textContent=e.name,document.querySelector("#choosePagePlayer2Name").textContent=t.name}(n,r),e(c),a(n,r,c)}))}(l)}),2e3)})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9jb2RlcnNjYW1wMjAyMC5wcm9qZWN0LnR5cGVzY3JpcHQucG9rZW1vbmZpZ2h0Ly4vc3JjL21vZGFsUG9wVXBGdW5jdGlvbnMudHMiLCJ3ZWJwYWNrOi8vY29kZXJzY2FtcDIwMjAucHJvamVjdC50eXBlc2NyaXB0LnBva2Vtb25maWdodC8uL3NyYy9jaG9vc2VQb2tlbW9uc1BhZ2UvY3JlYXRlQWN0aXZlUGxheWVyTmFtZS50cyIsIndlYnBhY2s6Ly9jb2RlcnNjYW1wMjAyMC5wcm9qZWN0LnR5cGVzY3JpcHQucG9rZW1vbmZpZ2h0Ly4vc3JjL3Bva2Vtb25DbGFzcy50cyIsIndlYnBhY2s6Ly9jb2RlcnNjYW1wMjAyMC5wcm9qZWN0LnR5cGVzY3JpcHQucG9rZW1vbmZpZ2h0Ly4vc3JjL3Bva2Vtb25GYWN0b3J5LnRzIiwid2VicGFjazovL2NvZGVyc2NhbXAyMDIwLnByb2plY3QudHlwZXNjcmlwdC5wb2tlbW9uZmlnaHQvLi9zcmMvY2hvb3NlUG9rZW1vbnNQYWdlL3JlbmRlckZpZ2h0UGFnZS50cyIsIndlYnBhY2s6Ly9jb2RlcnNjYW1wMjAyMC5wcm9qZWN0LnR5cGVzY3JpcHQucG9rZW1vbmZpZ2h0Ly4vc3JjL2Nob29zZVBva2Vtb25zUGFnZS9jcmVhdGVQb2tlbW9ucy50cyIsIndlYnBhY2s6Ly9jb2RlcnNjYW1wMjAyMC5wcm9qZWN0LnR5cGVzY3JpcHQucG9rZW1vbmZpZ2h0Ly4vc3JjL2Nob29zZVBva2Vtb25zUGFnZS9hZGRDaG9zZW5Qb2tlbW9uLnRzIiwid2VicGFjazovL2NvZGVyc2NhbXAyMDIwLnByb2plY3QudHlwZXNjcmlwdC5wb2tlbW9uZmlnaHQvLi9zcmMvY2hvb3NlUG9rZW1vbnNQYWdlL2NyZWF0ZVBva2ViYWxscy50cyIsIndlYnBhY2s6Ly9jb2RlcnNjYW1wMjAyMC5wcm9qZWN0LnR5cGVzY3JpcHQucG9rZW1vbmZpZ2h0Ly4vc3JjL2Nob29zZVBva2Vtb25zUGFnZS9zdGFydEdhbWVJZlJlYWR5LnRzIiwid2VicGFjazovL2NvZGVyc2NhbXAyMDIwLnByb2plY3QudHlwZXNjcmlwdC5wb2tlbW9uZmlnaHQvLi9zcmMvcGxheWVyQ2xhc3MudHMiLCJ3ZWJwYWNrOi8vY29kZXJzY2FtcDIwMjAucHJvamVjdC50eXBlc2NyaXB0LnBva2Vtb25maWdodC8uL3NyYy9hY3RpdmF0ZVN0YXJ0LnRzIiwid2VicGFjazovL2NvZGVyc2NhbXAyMDIwLnByb2plY3QudHlwZXNjcmlwdC5wb2tlbW9uZmlnaHQvLi9zcmMvaW5kZXgudHMiLCJ3ZWJwYWNrOi8vY29kZXJzY2FtcDIwMjAucHJvamVjdC50eXBlc2NyaXB0LnBva2Vtb25maWdodC8uL3NyYy9jaG9vc2VQb2tlbW9uc1BhZ2UvY2hvb3NlUG9rZW1vbnNQYWdlLnRzIiwid2VicGFjazovL2NvZGVyc2NhbXAyMDIwLnByb2plY3QudHlwZXNjcmlwdC5wb2tlbW9uZmlnaHQvLi9zcmMvY2hvb3NlUG9rZW1vbnNQYWdlL2NyZWF0ZVBsYXllck5hbWVzLnRzIl0sIm5hbWVzIjpbImNyZWF0ZUFjdGl2ZVBsYXllck5hbWUiLCJhY3RpdmVQbGF5ZXIiLCJ3aG9DaG9vc2VzUG9rZW1vblRleHQiLCJkb2N1bWVudCIsInF1ZXJ5U2VsZWN0b3IiLCJwb2tlbW9ucyIsImxlbmd0aCIsInRleHRDb250ZW50IiwibmFtZSIsImltYWdlIiwibWF4SFAiLCJhdHRhY2tQb2ludHMiLCJkZWZlbnNlUG9pbnRzIiwidHlwZXMiLCJtb3ZlcyIsInRoaXMiLCJfbmFtZSIsIl9pbWFnZSIsIl9tYXhIUCIsIl9jdXJyZW50SFAiLCJfYXR0YWNrUG9pbnRzIiwiX2RlZmVuc2VQb2ludHMiLCJfdHlwZXMiLCJfbW92ZXMiLCJzdWJ0cmFjdEhQIiwicG9pbnRzVG9TdWJ0cmFjdCIsIm5ld0hQIiwiaGVhbCIsImlzQWxpdmUiLCJwb2tlRGF0YSIsIl9wb2tlbW9ucyIsInBva2Vtb24iLCJwb2tlSW1nIiwicG9rZU1vdmVzIiwicmVkdWNlIiwidGFiIiwibW92ZSIsInB1c2giLCJtb3ZlTmFtZSIsIm1vdmVUeXBlIiwidHlwZSIsInBva2VUeXBlcyIsIm1hcCIsInYiLCJwb2tlbW9uT2JqZWN0IiwiUG9rZW1vbiIsIl9jYXBpdGFsaXplIiwic3RhdHMiLCJocCIsImF0dGFjayIsImRlZmVuc2UiLCJnZXRQb2tlbW9uQnlOYW1lIiwiZmluZCIsInRvTG93ZXJDYXNlIiwidW5kZWZpbmVkIiwiRXJyb3IiLCJzdHIiLCJjaGFyQXQiLCJ0b1VwcGVyQ2FzZSIsInNsaWNlIiwiY3JlYXRlUG9rZW1vbnMiLCJwbGF5ZXJPbmUiLCJwbGF5ZXJUd28iLCJwb2tlbW9uRmFjdG9yeSIsIlBva2Vtb25GYWN0b3J5IiwiQXJyYXkiLCJmcm9tIiwicXVlcnlTZWxlY3RvckFsbCIsImZvckVhY2giLCJwb2tlbW9uSW1hZ2UiLCJhZGRFdmVudExpc3RlbmVyIiwiZSIsImV2ZW50IiwiZmFjdG9yeSIsInBva2Vtb25OYW1lIiwidGFyZ2V0IiwiaWQiLCJuZXdQb2tlbW9uT2JqZWN0IiwiYWRkUG9rZW1vbiIsInN0eWxlIiwiY3Vyc29yIiwiZmlsdGVyIiwiYWRkQ2hvc2VuUG9rZW1vbiIsInBsYXllclBva2ViYWxscyIsInBsYXllckxhc3RQb2tlbW9uTmFtZSIsInNldEF0dHJpYnV0ZSIsImNyZWF0ZVBva2ViYWxscyIsImNvbnNvbGUiLCJsb2ciLCJhcHAiLCJzZXRUaW1lb3V0IiwiYXBwRGl2IiwiZmlnaHRQYWdlIiwiaW5uZXJIVE1MIiwic3RhcnRHYW1lSWZSZWFkeSIsIm9uY2UiLCJfaW5kZXhPZkFjdGl2ZVBva2Vtb24iLCJudW1PZkFjdGl2ZVBva2Vtb24iLCJhY3RpdmF0ZVN0YXJ0IiwibmFtZTFJbnB1dCIsIm5hbWUySW5wdXQiLCJzdGFydEJ1dHRvbiIsInZhbHVlIiwiY2xhc3NOYW1lIiwic3RhcnRpbmdQYWdlIiwicGxheWVyMU5hbWVJbnB1dCIsInBsYXllcjJOYW1lSW5wdXQiLCJzY3JlZW5Ub0Rpc3BsYXkiLCJleGl0QnV0dG9uIiwiaG93VG9QbGF5QnV0dG9uIiwiaW5mb01vZGFsIiwicmVuZGVySG93VG9QbGF5TW9kYWwiLCJkaXNwbGF5IiwicGxheUJ1dHRvbiIsImNob29zZVBva2Vtb25TY3JlZW4iLCJQbGF5ZXIiLCJjcmVhdGVQbGF5ZXJOYW1lcyIsInJlbmRlckNob29zZVBva2Vtb25TY3JlZW4iXSwibWFwcGluZ3MiOiJtQkFBTyxJQ0VNQSxFQUF5QixTQUFDQyxHQUNyQyxJQUFJQyxFQUF3QkMsU0FBU0MsY0FBYyx3QkFDbEIsSUFBakNILEVBQWFJLFNBQVNDLE9BQ2pCSixFQUFzQkssWUFBYyxnQ0FDcENMLEVBQXNCSyxZQUFpQk4sRUFBYU8sS0FBSSxzQkNTL0QsYUFXRSxXQUFZQSxFQUFjQyxFQUFlQyxFQUFlQyxFQUN0REMsRUFBdUJDLEVBQXNCQyxHQUU3Q0MsS0FBS0MsTUFBUVIsRUFDYk8sS0FBS0UsT0FBU1IsRUFDZE0sS0FBS0csT0FBU1IsRUFDZEssS0FBS0ksV0FBYVQsRUFDbEJLLEtBQUtLLGNBQWdCVCxFQUNyQkksS0FBS00sZUFBaUJULEVBQ3RCRyxLQUFLTyxPQUFTVCxFQUNkRSxLQUFLUSxPQUFTVCxFQW1EbEIsT0EvQ0Usc0JBQUksbUJBQUksQyxJQUFSLFdBQ0UsT0FBT0MsS0FBS0MsTyxnQ0FHZCxzQkFBSSxvQkFBSyxDLElBQVQsV0FDRSxPQUFPRCxLQUFLRSxRLGdDQUdkLHNCQUFJLHdCQUFTLEMsSUFBYixXQUNFLE9BQU9GLEtBQUtJLFksZ0NBR2Qsc0JBQUksb0JBQUssQyxJQUFULFdBQ0UsT0FBT0osS0FBS0csUSxnQ0FHZCxZQUFBTSxXQUFBLFNBQVdDLEdBQ1QsSUFBTUMsRUFBUVgsS0FBS0ksV0FBYU0sRUFDNUJDLEVBQVEsSUFDVlgsS0FBS0ksV0FBYSxHQUVwQkosS0FBS0ksV0FBYU8sR0FHcEIsWUFBQUMsS0FBQSxXQUNFWixLQUFLSSxXQUFhSixLQUFLRyxRQUd6QixzQkFBSSwyQkFBWSxDLElBQWhCLFdBQ0UsT0FBT0gsS0FBS0ssZSxnQ0FHZCxzQkFBSSw0QkFBYSxDLElBQWpCLFdBQ0UsT0FBT0wsS0FBS00sZ0IsZ0NBR2Qsc0JBQUks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a0J2RCxFQUFXQyxHQUM3QjlELEVBQXVCQyxHQUN2QjJELEVBQWVDLEVBQVdDLEVBQVc3RCxNRHNEckNvSCxDQUEwQjVCLEtBR04sTSIsImZpbGUiOiJpbmRleC5qcyIsInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCBjb25zdCBzaG93TW9kYWwgPSAoXHJcbiAgc2NyZWVuVG9EaXNwbGF5OiBIVE1MRGl2RWxlbWVudCxcclxuICBzdGFydGluZ1Bvc2l0aW9uOiBzdHJpbmdcclxuKSA9PiB7XHJcbiAgc2NyZWVuVG9EaXNwbGF5LnN0eWxlLmRpc3BsYXkgPSBzdGFydGluZ1Bvc2l0aW9uO1xyXG59O1xyXG5cclxuZXhwb3J0IGNvbnN0IGhpZGVNb2RhbCA9IChzY3JlZW5Ub0Rpc3BsYXk6IEhUTUxEaXZFbGVtZW50KSA9PiB7XHJcbiAgY29uc3QgZXhpdEJ1dHRvbiA9IHNjcmVlblRvRGlzcGxheS5xdWVyeVNlbGVjdG9yKFwiLmV4aXRCdXR0b25cIik7XHJcbiAgZXhpdEJ1dHRvbj8uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuICAgIHNjcmVlblRvRGlzcGxheS5zdHlsZS5kaXNwbGF5ID0gXCJub25lXCI7XHJcbiAgfSk7XHJcbn07XHJcbiIsImltcG9ydCB7IFBsYXllciB9IGZyb20gXCIuLi9wbGF5ZXJDbGFzc1wiO1xyXG5cclxuZXhwb3J0IGNvbnN0IGNyZWF0ZUFjdGl2ZVBsYXllck5hbWUgPSAoYWN0aXZlUGxheWVyOiBQbGF5ZXIpID0+IHtcclxuICBsZXQgd2hvQ2hvb3Nlc1Bva2Vtb25UZXh0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiN3aG9DaG9vc2VzUGFyYWdyYXBoXCIpITtcclxuICBhY3RpdmVQbGF5ZXIucG9rZW1vbnMubGVuZ3RoID09PSAzXHJcbiAgICA/ICh3aG9DaG9vc2VzUG9rZW1vblRleHQudGV4dENvbnRlbnQgPSBcIldhaXQgZm9yIHRoZSBnYW1lIHRvIHN0YXJ0Li4uXCIpXHJcbiAgICA6ICh3aG9DaG9vc2VzUG9rZW1vblRleHQudGV4dENvbnRlbnQgPSBgJHthY3RpdmVQbGF5ZXIubmFtZX0gY2hvb3NlcyAxIHBva2Vtb25gKTtcclxufTtcclxuIiwiZXhwb3J0IHR5cGUgUG9rZW1vblR5cGUgPVxyXG4gIHwgXCJncmFzc1wiXHJcbiAgfCBcInBvaXNvblwiXHJcbiAgfCBcImZpcmVcIlxyXG4gIHwgXCJ3YXRlclwiXHJcbiAgfCBcImJ1Z1wiXHJcbiAgfCBcIm5vcm1hbFwiXHJcbiAgfCBcImZseWluZ1wiXHJcbiAgfCBcImVsZWN0cmljXCJcclxuICB8IFwiZ3JvdW5kXCJcclxuICB8IFwiZmFpcnlcIlxyXG4gIHwgXCJwc3ljaGljXCJcclxuICB8IFwiZmlnaHRpbmdcIlxyXG4gIHwgXCJyb2NrXCI7XHJcblxyXG5leHBvcnQgY2xhc3MgUG9rZW1vbiB7XHJcblxyXG4gIHJlYWRvbmx5IF9uYW1lOiBzdHJpbmc7XHJcbiAgcmVhZG9ubHkgX2ltYWdlOiBzdHJpbmc7XHJcbiAgcmVhZG9ubHkgX21heEhQOiBudW1iZXI7XHJcbiAgcHJpdmF0ZSBfY3VycmVudEhQOiBudW1iZXI7XHJcbiAgcmVhZG9ubHkgX2F0dGFja1BvaW50czogbnVtYmVyO1xyXG4gIHJlYWRvbmx5IF9kZWZlbnNlUG9pbnRzOiBudW1iZXI7XHJcbiAgcmVhZG9ubHkgX3R5cGVzOiBQb2tlbW9uVHlwZVtdO1xyXG4gIHJlYWRvbmx5IF9tb3ZlczogeyBtb3ZlTmFtZTogc3RyaW5nOyBtb3ZlVHlwZTogUG9rZW1vblR5cGUgfVtdO1xyXG5cclxuICBjb25zdHJ1Y3RvcihuYW1lOiBzdHJpbmcsIGltYWdlOiBzdHJpbmcsIG1heEhQOiBudW1iZXIsIGF0dGFja1BvaW50czogbnVtYmVyLFxyXG4gICAgZGVmZW5zZVBvaW50czogbnVtYmVyLCB0eXBlczogUG9rZW1vblR5cGVbXSwgbW92ZXM6IHsgbW92ZU5hbWU6IHN0cmluZzsgbW92ZVR5cGU6IFBva2Vtb25UeXBlIH1bXSkge1xyXG5cclxuICAgIHRoaXMuX25hbWUgPSBuYW1lO1xyXG4gICAgdGhpcy5faW1hZ2UgPSBpbWFnZTtcclxuICAgIHRoaXMuX21heEhQID0gbWF4SFA7XHJcbiAgICB0aGlzLl9jdXJyZW50SFAgPSBtYXhIUDtcclxuICAgIHRoaXMuX2F0dGFja1BvaW50cyA9IGF0dGFja1BvaW50cztcclxuICAgIHRoaXMuX2RlZmVuc2VQb2ludHMgPSBkZWZlbnNlUG9pbnRzO1xyXG4gICAgdGhpcy5fdHlwZXMgPSB0eXBlcztcclxuICAgIHRoaXMuX21vdmVzID0gbW92ZXM7XHJcbiAgfVxyXG5cclxuXHJcbiAgZ2V0IG5hbWUoKSB7XHJcbiAgICByZXR1cm4gdGhpcy5fbmFtZTtcclxuICB9XHJcblxyXG4gIGdldCBpbWFnZSgpIHtcclxuICAgIHJldHVybiB0aGlzLl9pbWFnZTtcclxuICB9XHJcblxyXG4gIGdldCBjdXJyZW50SFAoKSB7XHJcbiAgICByZXR1cm4gdGhpcy5fY3VycmVudEhQO1xyXG4gIH1cclxuXHJcbiAgZ2V0IG1heEhQKCkge1xyXG4gICAgcmV0dXJuIHRoaXMuX21heEhQO1xyXG4gIH1cclxuXHJcbiAgc3VidHJhY3RIUChwb2ludHNUb1N1YnRyYWN0OiBudW1iZXIpOiB2b2lkIHtcclxuICAgIGNvbnN0IG5ld0hQID0gdGhpcy5fY3VycmVudEhQIC0gcG9pbnRzVG9TdWJ0cmFjdDtcclxuICAgIGlmIChuZXdIUCA8IDApIHtcclxuICAgICAgdGhpcy5fY3VycmVudEhQID0gMDtcclxuICAgIH1cclxuICAgIHRoaXMuX2N1cnJlbnRIUCA9IG5ld0hQO1xyXG4gIH1cclxuXHJcbiAgaGVhbCgpOiB2b2lkIHtcclxuICAgIHRoaXMuX2N1cnJlbnRIUCA9IHRoaXMuX21heEhQO1xyXG4gIH1cclxuXHJcbiAgZ2V0IGF0dGFja1BvaW50cygpIHtcclxuICAgIHJldHVybiB0aGlzLl9hdHRhY2tQb2ludHM7XHJcbiAgfVxyXG5cclxuICBnZXQgZGVmZW5zZVBvaW50cygpIHtcclxuICAgIHJldHVybiB0aGlzLl9kZWZlbnNlUG9pbnRzO1xyXG4gIH1cclxuXHJcbiAgZ2V0IHR5cGVzKCkge1xyXG4gICAgcmV0dXJuIHRoaXMuX3R5cGVzO1xyXG4gIH1cclxuXHJcbiAgZ2V0IG1vdmVzKCkge1xyXG4gICAgcmV0dXJuIHRoaXMuX21vdmVzO1xyXG4gIH1cclxuXHJcbiAgaXNBbGl2ZSgpOiBib29sZWFuIHtcclxuICAgIHJldHVybiB0aGlzLl9jdXJyZW50SFAgPiAwO1xyXG4gIH1cclxufVxyXG4iLCJpbXBvcnQgeyBQb2tlbW9uIH0gZnJvbSBcIi4vcG9rZW1vbkNsYXNzXCJcclxuaW1wb3J0IHsgUG9rZW1vblR5cGUgfSBmcm9tIFwiLi9wb2tlbW9uQ2xhc3NcIlxyXG5cclxuXHJcbmV4cG9ydCBjbGFzcyBQb2tlbW9uRmFjdG9yeSB7XHJcbiAgICByZWFkb25seSBfcG9rZW1vbnM6IFBva2Vtb25bXTtcclxuXHJcbiAgICBjb25zdHJ1Y3Rvcihwb2tlRGF0YToge1xyXG4gICAgICAgIG5hbWU6IHN0cmluZzsgdHlwZXM6IHN0cmluZ1tdO1xyXG4gICAgICAgIHN0YXRzOiB7IGhwOiBudW1iZXI7IGF0dGFjazogbnVtYmVyOyBkZWZlbnNlOiBudW1iZXI7IH07XHJcbiAgICAgICAgbW92ZXM6IHsgbmFtZTogc3RyaW5nOyBhY2N1cmFjeTogbnVtYmVyOyBwb3dlcjogbnVtYmVyOyB0eXBlOiBzdHJpbmc7IH1bXVxyXG4gICAgfVtdKSB7XHJcbiAgICAgICAgdGhpcy5fcG9rZW1vbnMgPSBbXTtcclxuXHJcbiAgICAgICAgZm9yIChsZXQgcG9rZW1vbiBvZiBwb2tlRGF0YSkge1xyXG5cclxuICAgICAgICAgICAgY29uc3QgcG9rZUltZyA9IFwiLi4vYXNzZXRzL1wiICsgcG9rZW1vbi5uYW1lICsgXCIucG5nXCJcclxuXHJcbiAgICAgICAgICAgIGNvbnN0IHBva2VNb3ZlcyA9IHBva2Vtb24ubW92ZXMucmVkdWNlKCAodGFiLCBtb3ZlKSA9PiB7XHJcbiAgICAgICAgICAgICAgICB0YWIucHVzaCh7bW92ZU5hbWU6IG1vdmUubmFtZSwgbW92ZVR5cGU6IG1vdmUudHlwZSBhcyBQb2tlbW9uVHlwZX0pXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdGFiXHJcbiAgICAgICAgICAgICAgICB9LCBbXSBhcyB7bW92ZU5hbWU6IHN0cmluZywgbW92ZVR5cGU6IFBva2Vtb25UeXBlfVtdKVxyXG5cclxuICAgICAgICAgICAgY29uc3QgcG9rZVR5cGVzOiBQb2tlbW9uVHlwZVtdID0gcG9rZW1vbi50eXBlcy5tYXAodiA9PiB2IGFzIFBva2Vtb25UeXBlKVxyXG5cclxuICAgICAgICAgICAgY29uc3QgcG9rZW1vbk9iamVjdCA9IG5ldyBQb2tlbW9uKHRoaXMuX2NhcGl0YWxpemUocG9rZW1vbi5uYW1lKSwgcG9rZUltZywgXHJcbiAgICAgICAgICAgICAgICBwb2tlbW9uLnN0YXRzLmhwLCBwb2tlbW9uLnN0YXRzLmF0dGFjaywgcG9rZW1vbi5zdGF0cy5kZWZlbnNlLFxyXG4gICAgICAgICAgICAgICAgcG9rZVR5cGVzLCBwb2tlTW92ZXMpXHJcblxyXG4gICAgICAgICAgICB0aGlzLl9wb2tlbW9ucy5wdXNoKHBva2Vtb25PYmplY3QpXHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGdldCBwb2tlbW9ucygpOiBQb2tlbW9uW10ge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9wb2tlbW9uc1xyXG4gICAgfVxyXG5cclxuICAgIGdldFBva2Vtb25CeU5hbWUobmFtZTogc3RyaW5nKTogUG9rZW1vbiB7XHJcbiAgICAgICAgY29uc3QgcG9rZW1vbiA9IHRoaXMuX3Bva2Vtb25zLmZpbmQoIHBva2Vtb24gPT4gcG9rZW1vbi5uYW1lLnRvTG93ZXJDYXNlKCkgPT09IG5hbWUudG9Mb3dlckNhc2UoKSk7XHJcbiAgICAgICAgaWYgKHBva2Vtb24gPT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYFBva2Vtb24gJHtuYW1lfSBpcyBub3QgZm91bmQgaW4gdGhlIHBva2Vtb24gZmFjdG9yeWApXHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBwb2tlbW9uXHJcbiAgICB9XHJcblxyXG4gICAgX2NhcGl0YWxpemUoc3RyOiBzdHJpbmcpOiBzdHJpbmcge1xyXG4gICAgICAgIHJldHVybiBzdHIuY2hhckF0KDApLnRvVXBwZXJDYXNlKCkgKyBzdHIuc2xpY2UoMSk7XHJcbiAgICAgIH1cclxufVxyXG5cclxuIiwiZXhwb3J0IGNvbnN0IHJlbmRlckZpZ2h0UGFnZSA9IChhcHBEaXY6IEhUTUxEaXZFbGVtZW50KSA9PiB7XHJcbiAgY29uc3QgZmlnaHRQYWdlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcclxuICAgIFwiI2ZpZ2h0LXBhZ2UtdGVtcGxhdGVcIlxyXG4gICkgYXMgSFRNTFRlbXBsYXRlRWxlbWVudDtcclxuICBhcHBEaXYuaW5uZXJIVE1MID0gZmlnaHRQYWdlLmlubmVySFRNTDtcclxufTtcclxuIiwiaW1wb3J0IHsgUGxheWVyIH0gZnJvbSBcIi4uL3BsYXllckNsYXNzXCI7XHJcbmltcG9ydCB7IFBva2Vtb25GYWN0b3J5IH0gZnJvbSBcIi4uL3Bva2Vtb25GYWN0b3J5XCI7XHJcbmltcG9ydCAqIGFzIGRhdGEgZnJvbSBcIi4uLy4uL2Fzc2V0cy9wb2tlX2RhdGEuanNvblwiO1xyXG5pbXBvcnQgeyBzdGFydEdhbWVJZlJlYWR5IH0gZnJvbSBcIi4vc3RhcnRHYW1lSWZSZWFkeVwiO1xyXG5pbXBvcnQgeyBhZGRDaG9zZW5Qb2tlbW9uIH0gZnJvbSBcIi4vYWRkQ2hvc2VuUG9rZW1vblwiO1xyXG5pbXBvcnQgeyBjcmVhdGVQb2tlYmFsbHMgfSBmcm9tIFwiLi9jcmVhdGVQb2tlYmFsbHNcIjtcclxuaW1wb3J0IHsgY3JlYXRlQWN0aXZlUGxheWVyTmFtZSB9IGZyb20gXCIuL2NyZWF0ZUFjdGl2ZVBsYXllck5hbWVcIjtcclxuXHJcbmV4cG9ydCBjb25zdCBjcmVhdGVQb2tlbW9ucyA9IChcclxuICBwbGF5ZXJPbmU6IFBsYXllcixcclxuICBwbGF5ZXJUd286IFBsYXllcixcclxuICBhY3RpdmVQbGF5ZXI6IFBsYXllclxyXG4pID0+IHtcclxuICBjb25zdCBwb2tlRGF0YSA9IGRhdGEucG9rZW1vbnM7XHJcbiAgY29uc3QgcG9rZW1vbkZhY3RvcnkgPSBuZXcgUG9rZW1vbkZhY3RvcnkocG9rZURhdGEpO1xyXG4gIGNvbnN0IHBva2Vtb25JbWFnZXMgPSBBcnJheS5mcm9tKFxyXG4gICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIiNwb2tlbW9uTGlzdCBpbWdcIilcclxuICApIGFzIFtIVE1MSW1hZ2VFbGVtZW50XTtcclxuXHJcbiAgcG9rZW1vbkltYWdlcy5mb3JFYWNoKChwb2tlbW9uSW1hZ2UpID0+XHJcbiAgICBwb2tlbW9uSW1hZ2UuYWRkRXZlbnRMaXN0ZW5lcihcclxuICAgICAgXCJjbGlja1wiLFxyXG4gICAgICAoZSkgPT4ge1xyXG4gICAgICAgIGlmIChhY3RpdmVQbGF5ZXIucG9rZW1vbnMubGVuZ3RoID09PSAzKSByZXR1cm47XHJcbiAgICAgICAgYWRkQ2hvc2VuUG9rZW1vbihlLCBwb2tlbW9uRmFjdG9yeSwgYWN0aXZlUGxheWVyKTtcclxuICAgICAgICBjcmVhdGVQb2tlYmFsbHMocGxheWVyT25lLCBhY3RpdmVQbGF5ZXIpO1xyXG4gICAgICAgIC8vIGNoYW5nZSBwbGF5ZXJcclxuICAgICAgICBhY3RpdmVQbGF5ZXIgPSBhY3RpdmVQbGF5ZXIgPT09IHBsYXllck9uZSA/IHBsYXllclR3byA6IHBsYXllck9uZTtcclxuICAgICAgICBjcmVhdGVBY3RpdmVQbGF5ZXJOYW1lKGFjdGl2ZVBsYXllcik7XHJcbiAgICAgICAgY29uc29sZS5sb2cocGxheWVyT25lLCBwbGF5ZXJUd28pO1xyXG4gICAgICAgIHN0YXJ0R2FtZUlmUmVhZHkocGxheWVyT25lLCBwbGF5ZXJUd28pO1xyXG4gICAgICB9LFxyXG4gICAgICB7IG9uY2U6IHRydWUgfVxyXG4gICAgKVxyXG4gICk7XHJcbn07XHJcbiIsImltcG9ydCB7IFBva2Vtb24gfSBmcm9tIFwiLi4vcG9rZW1vbkNsYXNzXCI7XHJcbmltcG9ydCB7IFBva2Vtb25GYWN0b3J5IH0gZnJvbSBcIi4uL3Bva2Vtb25GYWN0b3J5XCI7XHJcbmltcG9ydCB7IFBsYXllciB9IGZyb20gXCIuLi9wbGF5ZXJDbGFzc1wiO1xyXG5cclxuZXhwb3J0IGNvbnN0IGFkZENob3NlblBva2Vtb24gPSAoXHJcbiAgZXZlbnQ6IEV2ZW50LFxyXG4gIGZhY3Rvcnk6IFBva2Vtb25GYWN0b3J5LFxyXG4gIGFjdGl2ZVBsYXllcjogUGxheWVyXHJcbikgPT4ge1xyXG4gIGNvbnN0IHBva2Vtb25OYW1lID0gKGV2ZW50LnRhcmdldCBhcyBIVE1MSW1hZ2VFbGVtZW50KS5pZDtcclxuICBjb25zdCBuZXdQb2tlbW9uT2JqZWN0OiBQb2tlbW9uID0gZmFjdG9yeS5nZXRQb2tlbW9uQnlOYW1lKHBva2Vtb25OYW1lKTtcclxuICBhY3RpdmVQbGF5ZXIuYWRkUG9rZW1vbihuZXdQb2tlbW9uT2JqZWN0KTtcclxuICAoZXZlbnQudGFyZ2V0IGFzIEhUTUxJbWFnZUVsZW1lbnQpLnN0eWxlLmN1cnNvciA9IFwiZGVmYXVsdFwiO1xyXG4gIChldmVudC50YXJnZXQgYXMgSFRNTEltYWdlRWxlbWVudCkuc3R5bGUuZmlsdGVyID0gXCJncmF5c2NhbGUoMTAwJSlcIjtcclxufTtcclxuIiwiaW1wb3J0IHsgUGxheWVyIH0gZnJvbSBcIi4uL3BsYXllckNsYXNzXCI7XHJcblxyXG5leHBvcnQgY29uc3QgY3JlYXRlUG9rZWJhbGxzID0gKFxyXG4gIHBsYXllck9uZTogUGxheWVyLFxyXG4gIGFjdGl2ZVBsYXllcjogUGxheWVyXHJcbikgPT4ge1xyXG4gIGNvbnN0IHBsYXllclBva2ViYWxsczogSFRNTEltYWdlRWxlbWVudFtdID1cclxuICAgIGFjdGl2ZVBsYXllciA9PT0gcGxheWVyT25lXHJcbiAgICAgID8gQXJyYXkuZnJvbShkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiI2Nob29zZVBhZ2VQbGF5ZXIxIGltZ1wiKSlcclxuICAgICAgOiBBcnJheS5mcm9tKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIjY2hvb3NlUGFnZVBsYXllcjIgaW1nXCIpKTtcclxuICBjb25zdCBwbGF5ZXJMYXN0UG9rZW1vbk5hbWU6IHN0cmluZyA9IGFjdGl2ZVBsYXllci5wb2tlbW9uc1tcclxuICAgIGFjdGl2ZVBsYXllci5wb2tlbW9ucy5sZW5ndGggLSAxXHJcbiAgXS5uYW1lLnRvTG93ZXJDYXNlKCk7XHJcbiAgY29uc3QgbnVtYmVyT2ZMYXN0UG9rZW1vbjogbnVtYmVyID0gYWN0aXZlUGxheWVyLnBva2Vtb25zLmxlbmd0aCAtIDE7XHJcbiAgcGxheWVyUG9rZWJhbGxzW251bWJlck9mTGFzdFBva2Vtb25dLnNldEF0dHJpYnV0ZShcclxuICAgIFwic3JjXCIsXHJcbiAgICBgLi9hc3NldHMvJHtwbGF5ZXJMYXN0UG9rZW1vbk5hbWV9LnBuZ2BcclxuICApO1xyXG59O1xyXG4iLCJpbXBvcnQgeyBQbGF5ZXIgfSBmcm9tIFwiLi4vcGxheWVyQ2xhc3NcIjtcclxuaW1wb3J0IHsgcmVuZGVyRmlnaHRQYWdlIH0gZnJvbSBcIi4vcmVuZGVyRmlnaHRQYWdlXCI7XHJcblxyXG5leHBvcnQgY29uc3Qgc3RhcnRHYW1lSWZSZWFkeSA9IChwbGF5ZXJPbmU6IFBsYXllciwgcGxheWVyVHdvOiBQbGF5ZXIpID0+IHtcclxuICBpZiAocGxheWVyT25lLnBva2Vtb25zLmxlbmd0aCA8IDMgfHwgcGxheWVyVHdvLnBva2Vtb25zLmxlbmd0aCA8IDMpIHJldHVybjtcclxuICBjb25zdCBhcHAgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI2FwcFwiKSBhcyBIVE1MRGl2RWxlbWVudDtcclxuICBzZXRUaW1lb3V0KCgpID0+IHJlbmRlckZpZ2h0UGFnZShhcHApLCAzMDAwKTtcclxufTtcclxuIiwiaW1wb3J0IHsgUG9rZW1vbiB9IGZyb20gXCIuL3Bva2Vtb25DbGFzc1wiO1xyXG5cclxuZXhwb3J0IGNsYXNzIFBsYXllciB7XHJcbiAgcHJpdmF0ZSBfbmFtZTogc3RyaW5nO1xyXG4gIHByaXZhdGUgX3Bva2Vtb25zOiBQb2tlbW9uW107XHJcbiAgcHJpdmF0ZSBfaW5kZXhPZkFjdGl2ZVBva2Vtb246IG51bWJlcjtcclxuICBjb25zdHJ1Y3RvcihuYW1lOiBzdHJpbmcsIHBva2Vtb25zOiBQb2tlbW9uW10pIHtcclxuICAgIGlmIChuYW1lLmxlbmd0aCA+IDgpIHtcclxuICAgICAgdGhyb3cgbmV3IEVycm9yKFwiVG9vIGxvbmcgbmFtZVwiKTtcclxuICAgIH1cclxuICAgIGlmIChwb2tlbW9ucy5sZW5ndGggPiAzKSB7XHJcbiAgICAgIHRocm93IG5ldyBFcnJvcihcIldyb25nIG51bWJlciBvZiBwb2tlbW9uc1wiKTtcclxuICAgIH1cclxuICAgIHRoaXMuX25hbWUgPSBuYW1lO1xyXG4gICAgdGhpcy5fcG9rZW1vbnMgPSBwb2tlbW9ucztcclxuICAgIHRoaXMuX2luZGV4T2ZBY3RpdmVQb2tlbW9uID0gMDtcclxuICB9XHJcblxyXG4gIGdldCBuYW1lKCk6IHN0cmluZyB7XHJcbiAgICByZXR1cm4gdGhpcy5fbmFtZTtcclxuICB9XHJcbiAgZ2V0IHBva2Vtb25zKCk6IFBva2Vtb25bXSB7XHJcbiAgICByZXR1cm4gdGhpcy5fcG9rZW1vbnM7XHJcbiAgfVxyXG5cclxuICBzZXQgaW5kZXhPZkFjdGl2ZVBva2Vtb24obnVtT2ZBY3RpdmVQb2tlbW9uOiBudW1iZXIpIHtcclxuICAgIHRoaXMuX2luZGV4T2ZBY3RpdmVQb2tlbW9uID0gbnVtT2ZBY3RpdmVQb2tlbW9uO1xyXG4gIH1cclxuICBnZXQgZ2V0QWN0aXZlUG9rZW1vbigpOiBQb2tlbW9uIHtcclxuICAgIHJldHVybiB0aGlzLl9wb2tlbW9uc1t0aGlzLl9pbmRleE9mQWN0aXZlUG9rZW1vbl07XHJcbiAgfVxyXG5cclxuICBnZXQgYWxpdmVQb2tlbW9ucygpOiBQb2tlbW9uW10ge1xyXG4gICAgY29uc3QgYWxpdmVQb2tlbW9uc1RhYjogUG9rZW1vbltdID0gdGhpcy5wb2tlbW9ucy5maWx0ZXIoKHBva2Vtb24pID0+XHJcbiAgICAgIHBva2Vtb24uaXNBbGl2ZSgpXHJcbiAgICApO1xyXG4gICAgcmV0dXJuIGFsaXZlUG9rZW1vbnNUYWI7XHJcbiAgfVxyXG5cclxuICBhZGRQb2tlbW9uKHBva2Vtb246IFBva2Vtb24pOiB2b2lkIHtcclxuICAgIHRoaXMuX3Bva2Vtb25zLnB1c2gocG9rZW1vbik7XHJcbiAgfVxyXG59XHJcbiIsImV4cG9ydCBjb25zdCBhY3RpdmF0ZVN0YXJ0ID0gKG5hbWUxSW5wdXQ6IEhUTUxJbnB1dEVsZW1lbnQsIG5hbWUySW5wdXQ6IEhUTUxJbnB1dEVsZW1lbnQsIHN0YXJ0QnV0dG9uOiBIVE1MRGl2RWxlbWVudCkgPT4ge1xyXG4gICAgaWYgKG5hbWUxSW5wdXQudmFsdWUubGVuZ3RoID4gMCAmJiBuYW1lMklucHV0LnZhbHVlLmxlbmd0aCA+IDApIHtcclxuICAgICAgICBzdGFydEJ1dHRvbi5jbGFzc05hbWUgPSAnYnV0dG9uLWVuYWJsZWQnXHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAgIHN0YXJ0QnV0dG9uLmNsYXNzTmFtZSA9ICdidXR0b24tZGlzYWJsZWQnXHJcbiAgICB9XHJcbn0iLCJpbXBvcnQgeyBzaG93TW9kYWwsIGhpZGVNb2RhbCB9IGZyb20gXCIuL21vZGFsUG9wVXBGdW5jdGlvbnNcIjtcclxuaW1wb3J0IHsgY3JlYXRlQ2hvb3NlUGFnZSB9IGZyb20gXCIuL2Nob29zZVBva2Vtb25zUGFnZS9jaG9vc2VQb2tlbW9uc1BhZ2VcIlxyXG5pbXBvcnQgeyBQbGF5ZXIgfSBmcm9tIFwiLi9wbGF5ZXJDbGFzc1wiO1xyXG5pbXBvcnQgeyBhY3RpdmF0ZVN0YXJ0IH0gZnJvbSAnLi9hY3RpdmF0ZVN0YXJ0JztcclxuXHJcbmNvbnN0IHJlbmRlclN0YXJ0aW5nUGFnZSA9IChhcHBEaXY6IEhUTUxEaXZFbGVtZW50KSA9PiB7XHJcbiAgY29uc3Qgc3RhcnRpbmdQYWdlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcclxuICAgIFwiI3N0YXJ0aW5nLXBhZ2UtdGVtcGxhdGVcIlxyXG4gICkgYXMgSFRNTFRlbXBsYXRlRWxlbWVudDtcclxuICBhcHBEaXYuaW5uZXJIVE1MID0gc3RhcnRpbmdQYWdlLmlubmVySFRNTDtcclxufTtcclxuY29uc3QgcmVuZGVySG93VG9QbGF5TW9kYWwgPSAoYXBwRGl2OiBIVE1MRGl2RWxlbWVudCkgPT4ge1xyXG4gIGNvbnN0IGluZm9Nb2RhbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXHJcbiAgICBcIiNpbmZvLW1vZGFsLXRlbXBsYXRlXCJcclxuICApIGFzIEhUTUxUZW1wbGF0ZUVsZW1lbnQ7XHJcbiAgYXBwRGl2LmlubmVySFRNTCArPSBpbmZvTW9kYWwuaW5uZXJIVE1MO1xyXG59O1xyXG5jb25zdCBjcmVhdGVIb3dUb1BsYXlCdXR0b24gPSAoKSA9PiB7XHJcbiAgY29uc3QgaG93VG9QbGF5QnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcclxuICAgIFwiI2hvdy10by1wbGF5LWJ1dHRvblwiXHJcbiAgKSBhcyBIVE1MVUxpc3RFbGVtZW50O1xyXG4gIGNvbnN0IGluZm9Nb2RhbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXHJcbiAgICBcIiNpbmZvLW1vZGFsLXNjcmVlblwiXHJcbiAgKSBhcyBIVE1MRGl2RWxlbWVudDtcclxuICBob3dUb1BsYXlCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuICAgIHNob3dNb2RhbChpbmZvTW9kYWwsIFwiZmxleFwiKTtcclxuICB9KTtcclxuICBoaWRlTW9kYWwoaW5mb01vZGFsKTtcclxufTtcclxuXHJcbmNvbnN0IGFjdGl2YXRlU3RhcnRCdXR0b24gPSAoKSA9PiB7XHJcbiAgY29uc3QgcGxheWVyMU5hbWVJbnB1dCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNlbnRlci1wbGF5ZXIxLW5hbWUnKSBhcyBIVE1MSW5wdXRFbGVtZW50O1xyXG4gIGNvbnN0IHBsYXllcjJOYW1lSW5wdXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjZW50ZXItcGxheWVyMi1uYW1lJykgYXMgSFRNTElucHV0RWxlbWVudDtcclxuICBjb25zdCBzdGFydEJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjc3RhcnQtZ2FtZS1idXR0b25cIikgYXMgSFRNTERpdkVsZW1lbnQ7XHJcbiAgcGxheWVyMU5hbWVJbnB1dC5hZGRFdmVudExpc3RlbmVyKFwia2V5dXBcIiwgKCkgPT4ge1xyXG4gICAgICBhY3RpdmF0ZVN0YXJ0KHBsYXllcjFOYW1lSW5wdXQsIHBsYXllcjJOYW1lSW5wdXQsIHN0YXJ0QnV0dG9uKVxyXG4gIH0pXHJcbiAgcGxheWVyMk5hbWVJbnB1dC5hZGRFdmVudExpc3RlbmVyKFwia2V5dXBcIiwgKCkgPT4ge1xyXG4gICAgICBhY3RpdmF0ZVN0YXJ0KHBsYXllcjFOYW1lSW5wdXQsIHBsYXllcjJOYW1lSW5wdXQsIHN0YXJ0QnV0dG9uKVxyXG4gIH0pO1xyXG59O1xyXG5cclxuY29uc3QgcmVuZGVyQ2hvb3NlUG9rZW1vblNjcmVlbiA9IChhcHBEaXY6IEhUTUxEaXZFbGVtZW50KSA9PiB7XHJcbiAgY29uc3QgcGxheUJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXHJcbiAgICBcIiNzdGFydC1nYW1lLWJ1dHRvblwiXHJcbiAgKSBhcyBIVE1MRGl2RWxlbWVudDtcclxuICBwbGF5QnV0dG9uPy5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG4gICAgY29uc3QgcGxheWVyMU5hbWVJbnB1dCA9IChkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjZW50ZXItcGxheWVyMS1uYW1lJykgYXMgSFRNTElucHV0RWxlbWVudCkudmFsdWU7XHJcbiAgICBjb25zdCBwbGF5ZXIyTmFtZUlucHV0ID0gKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNlbnRlci1wbGF5ZXIyLW5hbWUnKSBhcyBIVE1MSW5wdXRFbGVtZW50KS52YWx1ZTtcclxuICAgIGNvbnN0IGNob29zZVBva2Vtb25TY3JlZW4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFxyXG4gICAgICBcIiNjaG9vc2UtcGFnZS10ZW1wbGF0ZVwiXHJcbiAgICApIGFzIEhUTUxUZW1wbGF0ZUVsZW1lbnQ7XHJcbiAgICBhcHBEaXYuaW5uZXJIVE1MID0gY2hvb3NlUG9rZW1vblNjcmVlbi5pbm5lckhUTUw7XHJcbiAgICBjcmVhdGVDaG9vc2VQYWdlKG5ldyBQbGF5ZXIocGxheWVyMU5hbWVJbnB1dCwgW10pLCBuZXcgUGxheWVyKHBsYXllcjJOYW1lSW5wdXQsIFtdKSk7XHJcbiAgfSk7XHJcbn1cclxuXHJcbmNvbnN0IHJlbmRlckFwcCA9ICgpID0+IHtcclxuICBjb25zdCBhcHAgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI2FwcFwiKSBhcyBIVE1MRGl2RWxlbWVudDtcclxuICByZW5kZXJTdGFydGluZ1BhZ2UoYXBwKTtcclxuICByZW5kZXJIb3dUb1BsYXlNb2RhbChhcHApO1xyXG4gIGFjdGl2YXRlU3RhcnRCdXR0b24oKTtcclxuICBjcmVhdGVIb3dUb1BsYXlCdXR0b24oKTtcclxuICByZW5kZXJDaG9vc2VQb2tlbW9uU2NyZWVuKGFwcCk7XHJcbn07XHJcblxyXG5zZXRUaW1lb3V0KHJlbmRlckFwcCwgMjAwMCk7XHJcblxyXG4iLCJpbXBvcnQgeyBQbGF5ZXIgfSBmcm9tIFwiLi4vcGxheWVyQ2xhc3NcIjtcclxuaW1wb3J0IHsgY3JlYXRlQWN0aXZlUGxheWVyTmFtZSB9IGZyb20gXCIuL2NyZWF0ZUFjdGl2ZVBsYXllck5hbWVcIjtcclxuaW1wb3J0IHsgY3JlYXRlUGxheWVyTmFtZXMgfSBmcm9tIFwiLi9jcmVhdGVQbGF5ZXJOYW1lc1wiO1xyXG5pbXBvcnQgeyBjcmVhdGVQb2tlbW9ucyB9IGZyb20gXCIuL2NyZWF0ZVBva2Vtb25zXCI7XHJcblxyXG5leHBvcnQgY29uc3QgY3JlYXRlQ2hvb3NlUGFnZSA9IChwbGF5ZXJPbmU6IFBsYXllciwgcGxheWVyVHdvOiBQbGF5ZXIpID0+IHtcclxuICBsZXQgYWN0aXZlUGxheWVyID0gcGxheWVyT25lO1xyXG4gIGNyZWF0ZVBsYXllck5hbWVzKHBsYXllck9uZSwgcGxheWVyVHdvKTtcclxuICBjcmVhdGVBY3RpdmVQbGF5ZXJOYW1lKGFjdGl2ZVBsYXllcik7XHJcbiAgY3JlYXRlUG9rZW1vbnMocGxheWVyT25lLCBwbGF5ZXJUd28sIGFjdGl2ZVBsYXllcik7XHJcbn07XHJcbiIsImltcG9ydCB7IFBsYXllciB9IGZyb20gXCIuLi9wbGF5ZXJDbGFzc1wiO1xyXG5cclxuZXhwb3J0IGNvbnN0IGNyZWF0ZVBsYXllck5hbWVzID0gKHBsYXllck9uZTogUGxheWVyLCBwbGF5ZXJUd286IFBsYXllcikgPT4ge1xyXG4gIGxldCBwbGF5ZXJPbmVOYW1lQXJlYVRleHQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI2Nob29zZVBhZ2VQbGF5ZXIxTmFtZVwiKSE7XHJcbiAgcGxheWVyT25lTmFtZUFyZWFUZXh0LnRleHRDb250ZW50ID0gcGxheWVyT25lLm5hbWU7XHJcbiAgbGV0IHBsYXllclR3b05hbWVBcmVhVGV4dCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjY2hvb3NlUGFnZVBsYXllcjJOYW1lXCIpITtcclxuICBwbGF5ZXJUd29OYW1lQXJlYVRleHQudGV4dENvbnRlbnQgPSBwbGF5ZXJUd28ubmFtZTtcclxufTtcclxuIl0sInNvdXJjZVJvb3QiOiIifQ==